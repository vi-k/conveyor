Что хотелось бы сделать?

Лёгкое управление очередью
Лёгкое создание событий
Контроль прохождения события

Контроль прохождения события
onDone
onCancel
onError

Что можно хотеть?
Дождаться результата выполнения события и возврат значения
В случае изъятия события из очереди?
- вернуть отмену
- переключиться на событие, отменившее это

setFlashMode
отменяет все предыдущие такие же события, т.к. они теряют смысл
метод мог бы вернуть реально установленное значение режима вспышки
и в это случае все удалённые события могли бы перепривязаться к последнему

!!! состояние может меняться посреди работы события. хочется сделать что-то,
что легко повзоляет коду работать и адекватно реагировать на изменения

state = ready
запуск события, которое работает только с ready {
  await ...

  yield state.copyWith(...) - а если здесь state уже не ready?
}

!!! yield выполняет очередь микротасок после себя

Варианты:
1) если не передавать стейт в чистом виде, а передавать diff:
   yield ReadyState.diff(field: ...);

   а уже внутри стрима обрабатывать синхронно и изменения стейта извне и диффы.

   и если текущим стейтом дифф не может быть принят, то отменяем генератор

2) стейт может понадобиться после await
   state
